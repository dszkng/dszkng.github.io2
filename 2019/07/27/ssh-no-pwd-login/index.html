<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Dszkng's blog - ssh 免密码登录服务器</title>
  <link href="https://cdn.bootcss.com/normalize/8.0.1/normalize.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/github-markdown-css/3.0.1/github-markdown.min.css" rel="stylesheet">
<link href='/css/doc.css' rel='stylesheet'>
</head>
<body>
  <div class='menu'>
    <div class="toggle">
        <span class="up"></span>
        <span></span>
        <span></span>
    </div>
    <header>
        Dszkng's blog
    </header>
    <nav class='menu-nav'>
        
    </nav>
</div>
<div class="bg"></div>
  <div class='page'>
    <div class='page-content'>
      <div class="markdown-body"><h2 id="ssh-免密码登录服务器"><a href="#ssh-免密码登录服务器" class="headerlink" title="ssh 免密码登录服务器"></a>ssh 免密码登录服务器</h2><p>要实现 ssh 登录服务器，首先就要保证客户机（Mac/Pc）和服务器的 ssh 服务是开启的，它们的相关的命令如下：</p>
<p><strong>linux</strong></p>
<pre><code># start:开启 stop:关闭 restart:重启 status:查看服务状态
$ service sshd start</code></pre><p><strong>Mac</strong></p>
<pre><code># 1.编辑/etc/sshd_config文件，注释掉 #ForceCommand /usr/local/bin/ssh_session

# 2.启动sshd服务
$ sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist

# 3.停止sshd服务
$ sudo launchctl unload -w /System/Library/LaunchDaemons/ssh.plist

# 4.查看是否启动
$ sudo launchctl list | grep ssh</code></pre><p><strong>其次，就是在本机生成密钥：</strong></p>
<p>已经存在密钥了则可以不用操作，否则需要在终端下执行命令 <code>ssh-keygen -t rsa</code>，最后把公钥放到服务器上，使用 <code>scp</code> 命令：</p>
<pre><code>$ scp ~/.ssh/id_rsa.pub aakng@服务器地址:/home/aakng/.ssh/</code></pre><p>然后把 id_rsa.pub 的内容加入到服务器端的默认验证文件 authorized_keys 中：</p>
<pre><code># 1.先登录到远程服务器，假设登录账号是aakng，/home/aakng/.ssh/和~/.ssh是同个目录
$ cd ~/.ssh

# 2.将公钥内容加入到authorized_keys文件，没有则新建一个就行。或者将公钥粘贴到authorized_keys中
$ cat -n /home/aakng/.ssh/local.id_rsa.pub &gt;&gt; authorized_keys</code></pre><p><strong>其它方法：直接将本机的公钥写入服务器账号下的authorized_keys中（没有测试过），命令如下：</strong></p>
<pre><code>$ ssh-copy-id -i ~/.ssh/id_rsa.pub aakng@服务器地址</code></pre><p><strong>最后，可以实现免密登录服务器</strong></p>
<pre><code>$ ssh aakng@服务器地址</code></pre></div>
    </div>
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.slim.min.js"></script>
<script src='/js/index.js'></script>
</body>
</html>