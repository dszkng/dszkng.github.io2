<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description" content="blog,dszkng"><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>ssh 免密码登录服务器</title><link rel="shortcut icon" href="/images/avatar.png" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><meta name="generator" content="Hexo 4.0.0"><link rel="alternate" href="/atom.xml" title="Dszkng's blog" type="application/atom+xml">
</head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.png"></div><div class="author"><div class="author-name"><a href="/">D.SZKNG</a></div><div class="about-me">Halo~</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">归档</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.png"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/dszkng"></span><a href="https://github.com/dszkng" target="_blank" title="https://github.com/dszkng">https://github.com/dszkng</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="shangzongkang@gmail.com"></span><span>shangzongkang@gmail.com</span></li><li class="social-item"><span class="label"><img src="/images/socials/wechat.svg" alt="dszkng"></span><span>dszkng</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">ssh 免密码登录服务器</div><div class="date">写于2019年07月27日</div><div class="content"><h2 id="ssh-免密码登录服务器"><a href="#ssh-免密码登录服务器" class="headerlink" title="ssh 免密码登录服务器"></a>ssh 免密码登录服务器</h2><p>要实现 ssh 登录服务器，首先就要保证客户机（Mac/Pc）和服务器的 ssh 服务是开启的，它们的相关的命令如下：</p>
<p><strong>linux</strong></p>
<pre><code># start:开启 stop:关闭 restart:重启 status:查看服务状态
$ service sshd start</code></pre><p><strong>Mac</strong></p>
<pre><code># 1.编辑/etc/sshd_config文件，注释掉 #ForceCommand /usr/local/bin/ssh_session

# 2.启动sshd服务
$ sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist

# 3.停止sshd服务
$ sudo launchctl unload -w /System/Library/LaunchDaemons/ssh.plist

# 4.查看是否启动
$ sudo launchctl list | grep ssh</code></pre><p><strong>其次，就是在本机生成密钥：</strong></p>
<p>已经存在密钥了则可以不用操作，否则需要在终端下执行命令 <code>ssh-keygen -t rsa</code>，最后把公钥放到服务器上，使用 <code>scp</code> 命令：</p>
<pre><code>$ scp ~/.ssh/id_rsa.pub aakng@服务器地址:/home/aakng/.ssh/</code></pre><p>然后把 id_rsa.pub 的内容加入到服务器端的默认验证文件 authorized_keys 中：</p>
<pre><code># 1.先登录到远程服务器，假设登录账号是aakng，/home/aakng/.ssh/和~/.ssh是同个目录
$ cd ~/.ssh

# 2.将公钥内容加入到authorized_keys文件，没有则新建一个就行。或者将公钥粘贴到authorized_keys中
$ cat -n /home/aakng/.ssh/local.id_rsa.pub &gt;&gt; authorized_keys</code></pre><p><strong>其它方法：直接将本机的公钥写入服务器账号下的authorized_keys中（没有测试过），命令如下：</strong></p>
<pre><code>$ ssh-copy-id -i ~/.ssh/id_rsa.pub aakng@服务器地址</code></pre><p><strong>最后，可以实现免密登录服务器</strong></p>
<pre><code>$ ssh aakng@服务器地址</code></pre></div><div class="tags"><a class="tag-link" href="/tags/ssh/" rel="tag">ssh</a><a class="tag-link" href="/tags/%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" rel="tag">免密登录</a></div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/2019/07/27/CentOS7-%E5%AE%89%E8%A3%85-Docker-%E5%92%8C-Docker-compose/">CentOS 7 安装 Docker 和 Docker-compose</a></li><li>下一篇：<a href="/2018/11/22/hello-world/">Hello World</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>© 2020 皖ICP备16002968号-1 |  </span><span>Powered by </span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-bear" target="_blank">Bear</a><span>.</span></div></footer><script src="/script/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/script/index.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-61220413-1', 'auto');
ga('send', 'pageview');</script><script src="/script/post.js"></script></body></html>